---
import MainLayout from "../layouts/MainLayout.astro";
import "@fontsource/pacifico";
import "@fontsource/sofia-sans";
import BlogHeader from "../components/BlogHeader.astro";
import { getAllPosts } from "../lib/consmic";
import BlogCard from "../components/BlogCard.astro";
import { type BlogPost } from "../utils/types";

const data: BlogPost[] = await getAllPosts();
---

<MainLayout>
  <div class="container">
    <BlogHeader />

    <div class="blogs">
      {
        data.map((post) => (
          <BlogCard
            title={post.title}
            excerpt={post.metadata.excerpt}
            date={post.created_at}
            imageUrl={`url(${post.metadata.image.url})`}
            tags={post.metadata.tags}
            slug={post.slug}
          />
        ))
      }
    </div>
  </div>
</MainLayout>

<style>
  .container {
    min-height: 100vh;
    width: 100%;
    padding: 2rem 0;
  }

  .blogs {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(30rem, 35rem));
    justify-content: center;
    gap: 4rem;
    padding: 5rem 0;
  }
</style>
